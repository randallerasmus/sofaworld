//tealium universal tag - utag.101 ut4.0.202006221807, Copyright 2020 Tealium.com Inc. All Rights Reserved.
var appboy=appboy||{};var appboyQueue=appboyQueue||[];for(var s="initialize destroy getDeviceId toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates logCardImpressions logCardClick logFeedDisplayed requestInAppMessageRefresh logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick logInAppMessageHtmlClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages submitFeedback ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setLanguage ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.User.prototype.addAlias ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.HtmlMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed sharedLib".split(" "),i=0;i<s.length;i++){for(var m=s[i],k=appboy,l=m.split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=(new Function("return function "+m.replace(/\./g,"_")+"(){appboyQueue.push(arguments)}"))()}appboy.getUser=function(){return new appboy.ab.User};appboy.getCachedFeed=function(){return new appboy.ab.Feed}
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1};u.initialized=false;u.scriptrequested=false;u.queue=[];u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.clearEmptyKeys=function(object){for(var key in object){if(object[key]===""||object[key]===undefined){delete object[key];}}
return object;};u.hasOwn=function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a);};u.isEmptyObject=function(o,a){for(a in o){if(u.hasOwn(o,a)){return false;}}return true;};u.map={"push_id":"initOpt.safari_pushid"};u.extend=[function(a,b){try{if(b['dom.domain'].toString().toLowerCase().indexOf('anthropologie'.toLowerCase())>-1){b['push_id']='web.com.anthropologie.anweb'}}catch(e){utag.DB(e);}}];u.loader_cb=function(a,b,c){utag.DB("send:101:CALLBACK");u.initialized=true;var g={},i,j,_event,p;if(!u.isEmptyObject(u.data.initOpt)){var config={};if(u.data.initOpt.allow_crawler){config.allowCrawlerActivity=u.data.initOpt.allow_crawler;}
if(u.data.initOpt.app_ver){config.appVersion=u.data.initOpt.app_ver;}
if(u.data.initOpt.base_url){config.baseUrl=u.data.initOpt.base_url;}
if(u.data.initOpt.no_cookies){config.noCookies=u.data.initOpt.no_cookies;}
if(u.data.initOpt.no_fntawsm){config.doNotLoadFontAwesome=u.data.initOpt.no_fntawsm;}
if(u.data.initOpt.enable_htmlmsgs){config.enableHtmlInAppMessages=u.data.initOpt.enable_htmlmsgs;}
if(u.data.initOpt.enable_logging){config.enableLogging=u.data.initOpt.enable_logging;}
if(u.data.initOpt.localization){config.localization=u.data.initOpt.localization;}
if(u.data.initOpt.min_trggrinterval){config.minimumIntervalBetweenTriggerActionsInSeconds=u.data.initOpt.min_trggrinterval;}
if(u.data.initOpt.msg_innewtab){config.openInAppMessagesInNewTab=u.data.initOpt.msg_innewtab;}
if(u.data.initOpt.card_innewtab){config.openNewsFeedCardsInNewTab=u.data.initOpt.card_innewtab;}
if(u.data.initOpt.explicit_dissmisal){config.requireExplicitInAppMessageDismissal=u.data.initOpt.explicit_dissmisal;}
if(u.data.initOpt.safari_pushid){config.safariWebsitePushId=u.data.initOpt.safari_pushid;}
if(u.data.initOpt.srvcewrkr_location){config.serviceWorkerLocation=u.data.initOpt.srvcewrkr_location;}
if(u.data.initOpt.session_timeout){config.sessionTimeoutInSeconds=u.data.initOpt.session_timeout;}
appboy.initialize(u.data.api_key,config);}else{appboy.initialize(u.data.api_key);}
appboy.display.automaticallyShowNewInAppMessages();if(u.data.customer_id){appboy.changeUser(u.data.customer_id);}
appboy.openSession();appboy.registerAppboyPushMessages();if(u.data.order_id){for(i=0;i<u.data.event.length;i++){if(u.data.event[i]==="Purchase"){p=true;}}
if(!p){u.data.event.push("Purchase");}}
for(i=0;i<u.data.event.length;i++){_event=u.data.event[i];g=u.data[_event]=u.data[_event]||{};if(_event==="Purchase"){if(!u.isEmptyObject(g.purchase_properties)){appboy.logPurchase(g.product_id||u.data.product_id[0],g.order_subtotal||u.data.order_subtotal,g.order_currency||u.data.order_currency,g.product_quantity||u.data.product_quantity[0],g.purchase_properties);}else{appboy.logPurchase(g.product_id||u.data.product_id[0],g.order_subtotal||u.data.order_subtotal,g.order_currency||u.data.order_currency,g.product_quantity||u.data.product_quantity[0]);}}else if(_event==="Alias"){appboy.getUser().addAlias(g.alias,g.label);}else if(_event==="AddAtt"){appboy.getUser().addToCustomAttributeArray(g.key,g.value);}else if(_event==="IncAtt"){appboy.getUser().incrementCustomUserAttribute(g.key,g.inc_value);}else if(_event==="RmvAtt"){appboy.getUser().removeFromCustomAttributeArray(g.key,g.value);}else if(_event==="SetAtt"){appboy.getUser().setCustomUserAttribute(g.key,g.value);}else if(_event==="SetAvatar"){appboy.getUser().setAvatarImageUrl(g.avatar_url);}else if(_event==="SetLoc"){appboy.getUser().setLastKnownLocation(g.latitude,g.longitude,g.accuracy,g.altitude,g.altitude_accuracy);}else if(_event==="SetDOB"){appboy.getUser().setDateOfBirth(g.year,g.month,g.day);}else if(_event==="SetEmail"){appboy.getUser().setEmail(g.email);}else if(_event==="SetEmailSub"){appboy.getUser().setEmailNotificationSubscriptionType(g.notification_type);}else if(_event==="SetPushSub"){appboy.getUser().setPushNotificationSubscriptionType(g.notification_type);}else if(_event==="SetFirst"){appboy.getUser().setFirstName(g.first_name);}else if(_event==="SetLast"){appboy.getUser().setLastName(g.last_name);}else if(_event==="SetCity"){appboy.getUser().setHomeCity(g.customer_city||u.data.customer_city);}else if(_event==="SetCountry"){appboy.getUser().setCountry(g.customer_country||u.data.customer_country);}else if(_event==="SetLang"){appboy.getUser().setLanguage(g.language);}else if(_event==="SetPhone"){appboy.getUser().setPhoneNumber(g.phone_number);}else if(_event==="SetGender"){appboy.getUser().setGender(g.gender);}else if(_event){if(!u.isEmptyObject(u.data[_event])){appboy.logCustomEvent(_event,u.data[_event]);}else{appboy.logCustomEvent(_event);}}}
utag.DB("send:101:CALLBACK:COMPLETE");};u.callBack=function(){var data={};while(data=u.queue.shift()){u.data=data.data;u.loader_cb(data.a,data.b,data.c);}};u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:101");utag.DB(b);var c,d,e,f,g,h;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"https://js.appboycdn.com/web-sdk/2.4/appboy.min.js","api_key":"6f0baa4c-4dbf-4b0d-9945-ddc58ab07a55","cst_url":"","enable_logging":"true","initOpt":{},"event":[],"custom":{},"product_id":[],"product_quantity":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};utag.DB("send:101:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}else{h=d.split(":");if(h.length===2&&b[h[0]]===h[1]){if(u.map[d]){u.data.event=u.data.event.concat(u.map[d].split(","));}}}}
utag.DB("send:101:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_subtotal=u.data.order_subtotal||b._csubtotal||"";u.data.order_currency=u.data.order_currency||b._ccurrency||"";u.data.customer_id=u.data.customer_id||b._ccustid||"";u.data.customer_city=u.data.customer_city||b._ccity||"";u.data.customer_country=u.data.customer_country||b._ccountry||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.event.length===0&&b._cevent!==undefined){u.data.event=(u.typeOf(b._cevent)==="array")?b._cevent.slice(0):[b._cevent];}
if(!u.data.base_url){utag.DB(u.id+": Tag not fired: Required attribute not populated");return;}
if(u.initialized){u.loader_cb(a,b,c);}else{u.queue.push({"data":u.data,"a":a,"b":b,"c":c});if(!u.scriptrequested){u.scriptrequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":u.callBack,"loc":"script","id":"utag_101","attrs":{}});}}
utag.DB("send:101:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("101","urbanoutfitters.a15-urbnweb"));}catch(error){utag.DB(error);}
