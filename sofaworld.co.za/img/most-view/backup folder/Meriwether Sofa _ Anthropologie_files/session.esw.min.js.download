window.esw.defineFeature("Session",function(d){function b(){this.trackedKeys=[];d.addMessageHandler("session.set",this.setSessionData.bind(this));d.addMessageHandler("session.get",function(c,a){parent.postMessage({method:"session.sessionData",data:this.getSessionData(c,a)},d.parentOrigin)}.bind(this));d.addMessageHandler("session.delete",this.deleteSessionData.bind(this));d.addMessageHandler("session.deleteAllKeys",function(c){this.deleteAllSessionData(c)}.bind(this))}b.prototype.getKeyName=function(c,
a){if(void 0!==a&&null!==a&&"string"===typeof a)return c+a;throw Error("key is a required parameter must be a string, cannot be undefined or null");};b.prototype.getSessionData=function(c,a,b){var e={};try{var f=b?localStorage:sessionStorage}catch(g){d.log("Allow or enable third-party cookies for Chat to work.");return}if(c&&a)a.forEach(function(a){e[a]=f.getItem(this.getKeyName(c,a))}.bind(this));else throw Error("getSessionData requires two non-null arguments (domain, keys).");return e};b.prototype.deleteSessionData=
function(c,a,b){var e;var f=b?localStorage:sessionStorage;if(c&&a)a.forEach(function(a){-1<this.trackedKeys.indexOf(a)&&(e=this.trackedKeys.indexOf(a),this.trackedKeys.splice(e,1));f.removeItem(this.getKeyName(c,a));"MASTER_DEPLOYMENT_ID"===a&&parent.postMessage({method:"session.updateMaster",data:{isMaster:!1}},d.parentOrigin)}.bind(this)),parent.postMessage({method:"session.deletedSessionData",data:a},d.parentOrigin);else throw Error("deleteSessionData requires two non-null arguments (domain, keys).");
};b.prototype.deleteAllSessionData=function(c){this.deleteSessionData(c,this.trackedKeys,!0);this.deleteSessionData(c,this.trackedKeys,!1);parent.postMessage({method:"session.deletedAllSessionData"},d.parentOrigin)};b.prototype.setSessionData=function(c,a,b){var e=b?localStorage:sessionStorage;if(c&&a)Object.keys(a).forEach(function(b){this.trackedKeys.push(b);e.setItem(this.getKeyName(c,b),a[b]);"MASTER_DEPLOYMENT_ID"===b&&parent.postMessage({method:"session.updateMaster",data:{isMaster:!0}},d.parentOrigin)}.bind(this));
else throw Error("setSessionData requires two non-null arguments (domain, data).");};d.sessionAPI=new b});
